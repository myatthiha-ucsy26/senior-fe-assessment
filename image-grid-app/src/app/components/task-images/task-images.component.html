<div class="delete-btn-container">
  <button
    mat-raised-button
    (click)="deleteAllTasks()"
    [ngClass]="{ 'delete-btn': assignedImages.length !== 0 }"
    [disabled]="assignedImages.length === 0"
  >
    Delete All Tasks
  </button>
</div>
<mat-card class="image-grid-container">
  <div class="no-task" *ngIf="getPaginatedImages().length === 0">
    <p>There is no task.</p>
  </div>
  <div class="paginator-container" *ngIf="getPaginatedImages().length > 0">
    <div class="pagination-controls">
      <button mat-icon-button (click)="prevPage()" [disabled]="isFirstPage()">
        <mat-icon>keyboard_arrow_left</mat-icon>
      </button>
      <span class="page-info"
        >{{ calculateStartIndex() }} - {{ calculateEndIndex() }} of
        {{ assignedImages.length }}</span
      >
      <button mat-icon-button (click)="nextPage()" [disabled]="isLastPage()">
        <mat-icon>keyboard_arrow_right</mat-icon>
      </button>
    </div>
  </div>
  <mat-grid-list [cols]="cols" *ngIf="getPaginatedImages().length > 0">
    <mat-grid-tile *ngFor="let image of getPaginatedImages()">
      <mat-card
        [@imageFadeIn]="imageLoadingStates[assignedImages.indexOf(image)]"
        class="image-card"
      >
        <mat-card-header>
          <div class="image-container">
            <img
              NgOptimizedImage
              [src]="image.url"
              ngSrcset="600w, 1000w, 1500w, 2000w, 2500w"
              alt="Image"
              width="100%"
              height="200"
              (load)="onImageLoaded(image)"
              [ngClass]="{
                loaded: !imageLoadingStates[assignedImages.indexOf(image)]
              }"
            />
            <mat-progress-spinner
              style="margin: 0 auto"
              diameter="30"
              *ngIf="imageLoadingStates[assignedImages.indexOf(image)]"
              mode="indeterminate"
            ></mat-progress-spinner>
          </div>
        </mat-card-header>
        <mat-card-actions class="task-img-action">
          <button mat-button (click)="viewImage(image.url)">View</button>
        </mat-card-actions>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
</mat-card>
